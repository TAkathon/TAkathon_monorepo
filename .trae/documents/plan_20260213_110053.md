I have analyzed the current codebase and designed a comprehensive plan to implement the database architecture and dockerization as requested.

### **Current State Analysis**

* **Database**: A `database/schema.sql` file exists with a solid foundation (users, skills, hackathons, teams), but `core-gateway` currently uses in-memory storage.

* **Backend**: `core-gateway` (Express) handles authentication but lacks a DB connection. `ai-engine` (Python) has an empty Dockerfile.

* **Frontend**: Multiple Next.js apps (student, sponsor, organizer, landing) exist but are not dockerized.

### **Proposed Plan**

## Phase 1: Database Architecture (`feat/db_arch`)

1. **Branch Setup**: Create and switch to `feat/db_arch`.
2. **Schema Implementation**:

   * Enhance the existing `database/schema.sql` to include missing entities: **Sponsors**, **Sponsorships**, **Applications**, and **Profiles** (Student/Organizer/Sponsor specific details).

   * Ensure all tables use UUID primary keys and proper foreign key constraints with `ON DELETE CASCADE`.

   * Add performance indexes on frequently queried fields (e.g., `email`, `role`, `hackathon_id`).
3. **Core Gateway Integration**:

   * Install **Prisma ORM** in `apps/core-gateway` (best fit for TypeScript/Nx).

   * Translate the SQL schema into a `schema.prisma` file.

   * Configure `libs/shared/api` or `core-gateway` to use the Prisma Client.

   * Replace the in-memory `UserService` in `core-gateway` with real database calls.
4. **Seeding & Migration**:

   * Create a seed script (`prisma/seed.ts`) to populate test users (Student, Organizer, Sponsor) and a demo hackathon.

   * Update `.env` and `.env.example` with `DATABASE_URL`.

## Phase 2: Dockerization (`feat/dockerize`)

1. **Branch Setup**: Create `feat/dockerize` from `feat/db_arch`.
2. **Container Setup**:

   * **Postgres**: Configure a standard PostgreSQL 16 container.

   * **Core Gateway**: Create a `Dockerfile` for the Node.js/Express app.

   * **AI Engine**: Create a `Dockerfile` for the Python/FastAPI app (populating the currently empty file).

   * **Frontends**: Create optimized `Dockerfile`s for the Next.js apps (using standalone output).
3. **Orchestration (`docker-compose.yml`)**:

   * Define services: `postgres`, `core-gateway`, `ai-engine`, `landing-page`, `student-portal`, `sponsor-panel`, `organizer-dashboard`.

   * **Networking**: Isolate the database on an internal network; expose only necessary ports for frontends and API gateways.

   * **Volume Management**: Persist database data using a named volume.

   * **Healthchecks**: Ensure services wait for the database to be ready (`pg_isready`).

## Phase 3: Final Integration & Documentation

1. **Merge Strategy**: Merge via pull requests `feat/db_arch` → `feat/dockerize`, then `feat/dockerize` → `dev`.
2. **Documentation**:

   <br />

   * Update `README.md` with:

     * **Quick Start**: `docker compose up --build`

     * **Local Dev**: Instructions for running migrations (`npx prisma migrate dev`) and seeding.

     * **Environment Variables**: Documentation of all required `.env` keys.

     * UPDATE copilot instruction file Accordingly

